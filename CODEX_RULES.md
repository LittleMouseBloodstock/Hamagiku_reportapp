# Codex CLI 共通参照ルール（必読）

> このファイルは、Codex CLI を用いたすべての作業において  
> **最初に必ず参照される前提ルール**である。

---

## 0. 基本原則（最重要）

- 勝手に進めない
- 勝手に構造を変えない
- 勝手に履歴を書き換えない
- 不明点は質問する
- Partial OK、独断 NG

---

## 1. 出力言語表記ルール

- 説明コメント指示文は **すべて日本語**
- コード識別子ファイル名変数名は **英語**
- 日本語コメントは可（推奨）

---

## 2. 作業開始時の必須フォーマット

作業開始時、**必ず以下をこの順で提示すること**

### 実行計画（箇条書き）
- 何を
- どの順で
- どこを触るか

### 編集対象ファイル一覧
- 相対パスで列挙
- 新規 / 変更 / 参照のみ を明記

### 影響範囲
- 既存機能への影響
- フロント / バック / DB など

👉 ユーザーの確認なしに着手してはならない

---

## 3. 差分提示ルール（必須）

- 差分は **unified diff（git patch 互換）形式のみ**
- 完成コード全文貼りは禁止
- 差分直後に **変更理由を短く明記**

---

## 4. Git 運用ルール（絶対遵守）

### 禁止
- rebase（全面禁止）
- force push
- 履歴改変につながる操作

### 許可
- merge 前提運用
- feature  develop  main
- コンフリクトは報告＋選択肢提示

---

## 5. 作業スコープ制限

- 作業範囲は **カレントリポジトリ内のみ**
- 以下は明示許可がない限り禁止
  - 外部ネットアクセス
  - 他リポジトリ参照
  - 新規 SaaS / API 導入
  - クラウド構成変更

---

## 6. 承認必須ケース

以下は **必ず事前確認を取ること**

- DB スキーマ変更
- 認証権限セキュリティ
- 課金個人情報関連
- 既存設計を壊す可能性がある変更

---

## 7. 不確実性がある場合

「多分」「おそらく」で進めない。

---

## 8. 重たい作業の場合

- 途中経過を分割して提示
- まとめて後出しは禁止
- トークン制限が見えたら中断報告

---

## 9. 優先順位

- このファイルが **最優先**
- README より優先
- Codex 一般ルールより優先
- 矛盾があれば必ず指摘すること

---

## 10. 原則まとめ

- 正しさより **合意**
- 速さより **安全**
- 賢さより **再現性**
